{"version":3,"sources":["api/index.js","utils/index.js","js/index.js"],"names":["messages","id","user","message","comments","forId","getMessages","delay","Math","random","Promise","resolve","setTimeout","exports","getComments","errorChance","floor","reject","prefixDate","date","Date","toLocaleString","updated","map","rest","createComment","createMessage","commentsArr","filter","e","baseTemplate","join","renderContent","container","createElems","innerHTML","_api","require","_utils","messagesContainer","document","querySelector","getMessageBtn","spinner","errorEl","addEventListener","style","display","error","innerText","updatedMessage"],"mappings":"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","file":"js.00a46daa.js","sourceRoot":"..\\src","sourcesContent":["const messages = [\n  {\n    id: 1,\n    user: \"James Doe\",\n    message: \"Have you guys tried the Hungry Lion at Park Lane?\",\n  },\n  {\n    id: 2,\n    user: \"Rebecca Stilton\",\n    message:\n      \"Strolling through Central Park is an amazing feeling. Not only does it put you right in the middle of an amazing display of flora and fauna but its the people who are the greatest asset. The smiles on their face, the peace on their mind is worth a million dollars.\",\n  },\n  {\n    id: 3,\n    user: \"Buzz Lightyear\",\n    message:\n      \"Well, how is everyone today? I've just returned to Planet Earth and boy everything has changed!\",\n  },\n];\nconst comments = [\n  {\n    id: 1,\n    forId: 1,\n    user: \"Rebecca Stilton\",\n    message: \"Oh yes! tried it last night. It's pretty good\",\n  },\n  {\n    id: 2,\n    forId: 1,\n    user: \"Rohit Consul\",\n    message:\n      \"I had a terrific experience there recently. The crew is hands-on and they really understand tastes well.\",\n  },\n  {\n    id: 3,\n    forId: 2,\n    user: \"Rohit Consul\",\n    message: \"I so agree! It is an incredible feeling!\",\n  },\n];\n\nexport const getMessages = function () {\n  let delay = Math.random() * 3000;\n  return new Promise((resolve) => {\n    setTimeout(function () {\n      resolve(messages);\n    }, delay);\n  });\n};\n\nexport const getComments = function () {\n  let errorChance = Math.floor(Math.random() * 2) + 1 === 2 ? true : false;\n  let delay = Math.random() * 6000;\n  return new Promise((resolve, reject) => {\n    if (errorChance) return reject(\"There was an error fetching comments\");\n    setTimeout(function () {\n      resolve(comments);\n    }, delay);\n  });\n};\n\nexport const prefixDate = (messages) => {\n  const date = new Date().toLocaleString();\n  const updated = messages.map(({ message, ...rest }) => {\n    return {\n      ...rest,\n      message: `<strong>${date}</strong> | ${message}`,\n    };\n  });\n\n  return Promise.resolve(updated);\n};\n","const createComment = (user, message) => `<div class=\"comment\">\n  <p class=\"user-name\">${user}</p>\n  <p class=\"message-text\">\n    ${message}\n  </p>\n</div>`;\n\nconst createMessage = ({ id, user, message }, commentsArr) => {\n  const getComments = commentsArr?.filter((e) => e.forId === id);\n  const baseTemplate = `<div class=\"message\">\n  <p class=\"user-name\">${user}</p>\n  <p class=\"message-text\">\n    ${message}\n  </p>\n  \n  <div class=\"comments\">\n    ${\n      getComments?.map((e) => createComment(e.user, e.message)).join(\"\") ??\n      \"No Comments\"\n    }\n  </div>\n</div>`;\n\n  return baseTemplate;\n};\n\nexport const renderContent = (messages, comments, container) => {\n  const createElems = messages.map((e) => createMessage(e, comments));\n\n  container.innerHTML = createElems.join(\"\");\n};\n","// Write your code here...\nimport { getMessages, prefixDate, getComments } from \"../api\";\nimport { renderContent } from \"../utils\";\nconst messagesContainer = document.querySelector(\"#messages\");\nconst getMessageBtn = document.querySelector(\"#getMessages\");\nconst spinner = document.querySelector(\"#spinner\");\nconst errorEl = document.querySelector(\"#error\");\n\ngetMessageBtn.addEventListener(\"click\", async () => {\n  spinner.style.display = \"block\";\n  messagesContainer.innerHTML = \"\";\n  error.innerText = \"\";\n\n  //Message\n  // getMessages().then((res) => console.log(res));\n  //Comments\n  // getComments().then((res) => console.log(res));\n\n  //render\n\n  //****************** */ Promise.all / Promise.allSettled****************\n\n  // Promise.allSettled([getComments(), getMessages()])\n  //   .then((res) => {\n  //     if (res[1].status === \"rejected\") return Promise.reject(res[1].reason);\n  //     return res;\n  //   })\n  //   .then(([{ value: message }, { value: comments }]) =>\n  //     renderContent(message, comments, messagesContainer)\n  //   )\n  //   .catch((error) => (errorEl.innerText = `Error : ${error}`))\n  //   .finally(() => (spinner.style.display = \"none\"));\n\n  try {\n    const messages = await getMessages();\n    const updatedMessage = await prefixDate(messages);\n    const comments = await getComments();\n    renderContent(updatedMessage, comments, messagesContainer);\n  } catch (error) {\n    errorEl.innerText = `Error: ${error}`;\n  }\n  spinner.style.display = \"none\";\n});\n"]}