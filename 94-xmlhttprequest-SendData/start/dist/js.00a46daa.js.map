{"version":3,"sources":["js/Http.js","js/index.js"],"names":["Http","constructor","uri","xhr","XMLHttpRequest","serialize","obj","qs","prop","encodeURIComponent","join","get","Promise","resolve","reject","open","addEventListener","status","statusText","response","error","send","post","data","setRequestHeader","delete","id","_default","exports","default","_Http","_interopRequireDefault","require","__esModule","container","document","querySelector","total","addProductForm","http","Row","product","price","render","arr","elems","map","e","totalCost","reduce","prev","curr","Number","innerHTML","loadAndRender","console","log","JSON","parse","alert","preventDefault","target","elements","value","stringify","getAttribute"],"mappings":"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","file":"js.00a46daa.js","sourceRoot":"..\\src","sourcesContent":["class Http {\n  constructor(uri) {\n    this.uri = uri;\n    this.xhr = new XMLHttpRequest();\n  }\n  static serialize(obj) {\n    let qs = [];\n    for (let prop in obj) {\n      qs = [\n        ...qs,\n        `${encodeURIComponent(prop)}=${encodeURIComponent(obj[prop])}`,\n      ];\n    }\n    return qs.join(\"&\");\n  }\n  get(qs) {\n    return new Promise((resolve, reject) => {\n      this.xhr.open(\"GET\", `${this.uri}/?${Http.serialize(qs)}`, true);\n      this.xhr.addEventListener(\"load\", function () {\n        resolve({ status: this.statusText, response: this.response });\n      });\n      this.xhr.addEventListener(\"error\", (error) => reject(error));\n      this.xhr.send();\n    });\n  }\n  post(data) {\n    return new Promise((resolve, reject) => {\n      this.xhr.addEventListener(\"load\", function () {\n        resolve({ status: this.statusText, response: this.response });\n      });\n      this.xhr.addEventListener(\"error\", (error) => reject(error));\n      this.xhr.open(\"POST\", this.uri, true);\n      this.xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n      this.xhr.send(data);\n    });\n  }\n  delete(id) {\n    return new Promise((resolve, reject) => {\n      this.xhr.addEventListener(\"load\", function () {\n        resolve({ status: this.statusText });\n      });\n      this.xhr.addEventListener(\"error\", (error) => reject(error));\n      this.xhr.open(\"DELETE\", `${this.uri}/${id}`, true);\n      this.xhr.send();\n    });\n  }\n}\n\nexport default Http;\n","// Write your code here...\nimport Http from './Http';\nconst container = document.querySelector('.list');\nconst total = document.querySelector('.total');\nconst addProductForm = document.querySelector('form[name=add-product]');\nconst http = new Http('http://localhost:3000/products');\n\nconst Row = ({ product, price, id }) =>\n  `<div class=\"product\">\n    <span class=\"prod-name\">${product}</span>\n    <span class=\"prod-cost\">$${price}</span>\n    <div class=\"delete-btn\"><a href=\"#\" name=\"delete-btn\" data-id=\"${id}\">X</a></div>\n  </div>`;\n\nconst render = function (arr) {\n  const elems = arr.map((e) => Row(e));\n  const totalCost = arr.reduce((prev, curr) => prev + Number(curr.price), 0);\n\n  container.innerHTML = elems.join('');\n  total.innerHTML = Row({ product: 'TOTAL', price: totalCost });\n};\n\nasync function loadAndRender() {\n  try {\n    const { status, response } = await http.get();\n    console.log(status);\n    render(JSON.parse(response));\n  } catch {\n    alert('There was an error talking to the server!');\n  }\n}\n\nloadAndRender();\n\n// Add product and reload\naddProductForm.addEventListener('submit', async function (e) {\n  e.preventDefault();\n  let product = e.target.elements.product;\n  let price = e.target.elements.price;\n  try {\n    if (product.value !== '' && price.value !== 0) {\n      await http.post(JSON.stringify({ product: product.value, price: Number(price.value) }));\n      loadAndRender();\n    }\n  } catch {\n    alert('There was an error storing data');\n  } finally {\n    product.value = '';\n    price.value = 0;\n  }\n});\n\ncontainer.addEventListener('click', async function (e) {\n  e.preventDefault();\n  if (e.target.getAttribute('name') === 'delete-btn') {\n    let id = e.target.getAttribute('data-id');\n    try {\n      await http.delete(id);\n      loadAndRender();\n    } catch {\n      alert('There was an error deleting data');\n    }\n  }\n});\n"]}